# FoodDiary

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Этот инструмент я использую для расчета примерного количества калорий, которые я слопал за день, а ещё — для контроля за балансом БЖУ (белков, жиров и углеводов)

Знаю, есть целый выводок приложений для решения этой задачи, но мне не нравится ни одно из них: какое-то теряет данные, где-то неудобный интерфейс, и почти все назойливо пытаются всучить платную подписку. А мне нужна одна-единственная простая функция!

## Как использовать? 

Во-первых, каждое утро я взвешиваюсь и записываю в журнал веса ([weights.yaml](weights.yaml)) текущее значение.

Пример:

```yaml
- 2021-08-02: 104.5
```

Во-вторых, в течении дня я записываю в дневник ([journal.yaml](journal.yaml)) всё, что съел.

Пример:

```yaml
- Яблоко, 130
```

Если за день я съел что-то, чего раньше не ел — добавляю информацию об этом продукте или блюде в справочник ([catalog.yaml](catalog.yaml)). Там хранится калорийность и количество белков-жиров-углеводов на сто грамм.

Пример:

```yaml
Яблоко: {
    К: 40,      # калорийность
    Б: 0.4,     # содержание белков
    Ж: 0.4,     # содержание жиров
    У: 9.8      # содержание углеводов
}
```

Когда я хочу понять, не перевалил ли за норму калорий в сутки и соблюдается ли баланс БЖУ — запускаю скрипт вывода статистики ([scripts/show_statistics.py](scripts/show_statistics.py)). Он отображает:

1. Остаток калорий на сегодня;
2. Общую калорийность в разрезе съеденных продуктов;
3. Количество белков, жиров и углеводов для каждого съеденного продукта;
4. Процентное соотношение всех потребленных в течении дня белков, жиров и углеводов.

Пример:

```
ПРОДУКТ                                       К          Б          Ж          У         

Вареная ветчина "Семейная"                    306        24         21         5         
Сосиски "Восточные"                           121        10         9          0         
Яблоко                                        56         1          1          14        

ИТОГО                                         483        35         31         19        

БАЛАНС БЖУ СЕГОДНЯ                                       41%        36%        22%       
ЦЕЛЕВОЙ БАЛАНС БЖУ                                       30%        20%        50%       

Дневная норма — 1650 ккал; остаток на сегодня — 1167.
```

Кроме этого, каждое утро я запускаю скрипт создания нового дневника ([scripts/archive_journal.py](scripts/archive_journal.py)) — он создает копию дневника в папке `history`, а потом очищает его.

## Как настроить? 

Все параметры — в файле [options.yaml](options.yaml). 

Основные возможности:

1. Норма калорий может считаться автоматически. Это делается по формуле Харриса-Бенедикта; она работает на основании вашего возраста (параметр `birth_date`), роста (параметр `height`), пола (параметр `sex`) и текущего веса (берется из файла `scale.yaml`).
2. При этом может учитывается ваша физическая активность (см. параметр `activity_multiplier`).
3. Если конечная цель — похудеть, то из можно автоматически срезать норму на определенный процент (см. параметр `calories_shortage`).
4. Автоматический расчет нормы можно не использовать вообще и задать лимит калорий самостоятельно — через параметр `calories_limit`.
5. Все файлы с данными могут быть переименованы, как вам удобно (см. параметры `journal_filename`, `catalog_filename` и так далее).

Пример:

```yaml
journal_filename: 'meals.yaml'  # имя файла дневника
catalog_filename: 'foods.yaml'  # имя файла справочника
```

## Вопросы

### Зачем нужен файл journal.yaml.md5?

Этот файл создаёт скрипт [send_statistics.py](scripts/send_statistics.py). Внутри — MD5-хэш от записей в [дневнике питания](journal.yaml). Скрипт считает актуальный хэш и сравнивает с хэшем из файла, чтобы понять — изменился дневник питания или нет.